<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Topology Computer Training Center</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#fff5f5;color:#333;}
::-webkit-scrollbar{width:10px;}::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px;}::-webkit-scrollbar-thumb{background:linear-gradient(45deg,#ff4d4d,#ff9999);border-radius:10px;}::-webkit-scrollbar-thumb:hover{background:linear-gradient(45deg,#ff1a1a,#ff6666);}
.container{max-width:1200px;margin:20px auto;padding:20px;}
nav{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;margin-bottom:20px;}
nav .logo{font-size:1.5rem;font-weight:bold;color:#ff4d4d;cursor:pointer;}
nav ul{display:flex;list-style:none;flex-wrap:wrap;}
nav ul li{margin-left:20px;cursor:pointer;font-weight:bold;color:#ff4d4d;}
nav ul li:hover{text-decoration:underline;}
section{display:none;}
section.active{display:block;animation:fadeIn 0.5s ease;}
#loginScreen{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;}
#loginScreen input{width:250px;padding:10px;margin:10px 0;border-radius:8px;border:none;}
#loginScreen button{padding:10px 20px;border:none;border-radius:8px;background:#ff4d4d;color:#fff;cursor:pointer;font-weight:bold;}
#loginScreen button:hover{background:#ff1a1a;}
#welcome{text-align:center;padding:50px;background:linear-gradient(135deg,#ff4d4d,#ff9999);color:#fff;border-radius:15px;margin-bottom:20px;}
.cards{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:20px;}
.card{flex:1 1 200px;padding:20px;border-radius:15px;background:linear-gradient(135deg,#ff4d4d,#ff9999);color:#fff;box-shadow:0 5px 15px rgba(0,0,0,0.2);}
.card h3{margin-bottom:10px;}
.chart-container{margin-top:20px;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
table th,table td{padding:10px;border:1px solid #ddd;text-align:left;}
table th{background:#ff4d4d;color:#fff;}
button{padding:5px 10px;border:none;border-radius:6px;background:#ff4d4d;color:#fff;cursor:pointer;margin-right:5px;}
button:hover{background:#ff1a1a;}
button:disabled{background:#ccc;cursor:not-allowed;}
#notifications{position:relative;margin-bottom:20px;}
.notification-item{background:#ffe6e6;padding:10px;margin-bottom:5px;border-radius:8px;color:#ff4d4d;}
input.addInput{width:90%;padding:5px;margin-bottom:5px;border-radius:6px;border:1px solid #ccc;}
@media(max-width:768px){.cards{flex-direction:column;} nav ul{flex-direction:column;gap:10px;margin-top:10px;}}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
</style>
</head>
<body>

<div id="loginScreen">

  <h1>Welcome to Topology Computer Training Center</h1>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginError" style="color:red;"></p>
</div>

<div class="container" style="display:none;">
  <div id="welcome">
    <h2>Welcome!</h2>
    <p>You are now logged in. Topology Computer Training Center is committed to excellence!</p>
  </div>

  <nav>
    <div class="logo" onclick="showSection('dashboard')">Topology</div>
    <ul>
      <li onclick="showSection('dashboard')">Dashboard</li>
      <li onclick="showSection('profiles')">Profiles</li>
      <li onclick="showSection('attendance')">Attendance</li>
      <li onclick="showSection('payments')">Payments</li>
      <li onclick="showSection('reports')">Reports</li>
      <li onclick="showSection('users')">Users</li>
    </ul>
  </nav>

  <div id="notifications"></div>

  <section id="dashboard" class="active">
    <h2>Dashboard</h2>
    <div class="cards">
      <div class="card"><h3>Total Students</h3><p id="totalStudents">0</p></div>
      <div class="card"><h3>Total Teachers</h3><p id="totalTeachers">0</p></div>
      <div class="card"><h3>Payments This Month</h3><p id="totalPayments">$0</p></div>
    </div>
    <div class="chart-container"><canvas id="paymentChart" height="150"></canvas></div>
  </section>

  <section id="profiles">
    <h2>Student Profiles</h2>
    <div style="margin-bottom:10px;"><button id="addStudentBtn" onclick="showAddStudentForm()" style="display:none;">Add Student</button></div>
    <div id="addStudentForm" style="display:none;margin-bottom:10px;border:1px solid #ccc;padding:10px;border-radius:8px;">
      <input type="text" id="newName" class="addInput" placeholder="Name">
      <input type="email" id="newEmail" class="addInput" placeholder="Email">
      <input type="number" id="newPaid" class="addInput" placeholder="Paid">
      <input type="text" id="newMonth" class="addInput" placeholder="Month">
      <button onclick="addStudent()">Save</button>
      <button onclick="hideAddStudentForm()">Cancel</button>
    </div>
    <table id="studentsTable">
      <tr><th>Name</th><th>Email</th><th>Paid</th><th>Month</th><th>Actions</th></tr>
    </table>
  </section>

  <section id="payments">
    <h2>Payments</h2>
    <div style="margin-bottom:10px;"><button id="addPaymentBtn" onclick="showAddPaymentForm()" style="display:none;">Add Payment</button></div>
    <div id="addPaymentForm" style="display:none;margin-bottom:10px;border:1px solid #ccc;padding:10px;border-radius:8px;">
      <select id="paymentStudent" class="addInput"></select>
      <input type="number" id="paymentAmount" class="addInput" placeholder="Amount">
      <input type="text" id="paymentMonth" class="addInput" placeholder="Month">
      <button onclick="addPayment()">Save</button>
      <button onclick="hideAddPaymentForm()">Cancel</button>
    </div>
    <table id="paymentsTable">
      <tr><th>Student</th><th>Amount</th><th>Month</th></tr>
    </table>
  </section>

  <section id="users">
    <h2>Users</h2>
    <div style="margin-bottom:10px;"><button id="addUserBtn" onclick="showAddUserForm()" style="display:none;">Add User</button></div>
    <div id="addUserForm" style="display:none;margin-bottom:10px;border:1px solid #ccc;padding:10px;border-radius:8px;">
      <input type="text" id="userName" class="addInput" placeholder="Name">
      <input type="email" id="userEmail" class="addInput" placeholder="Email">
      <input type="password" id="userPassword" class="addInput" placeholder="Password">
      <select id="userRole" class="addInput">
        <option value="teacher">Teacher</option>
        <option value="student">Student</option>
      </select>
      <button onclick="addUser()">Save</button>
      <button onclick="hideAddUserForm()">Cancel</button>
    </div>
    <table id="usersTable">
      <tr><th>Name</th><th>Email</th><th>Role</th><th>Actions</th></tr>
    </table>
  </section>

  <section id="attendance">
    <h2>Attendance</h2>
    <table>
      <tr><th>Name</th><th>Status</th><th>Date</th></tr>
      <tr><td>Abdirizak</td><td>Present</td><td>17-Sep-2025</td></tr>
      <tr><td>Student B</td><td>Absent</td><td>17-Sep-2025</td></tr>
    </table>
  </section>

  <section id="reports">
    <h2>Reports</h2>
    <button onclick="window.print()">Print Reports</button>
  </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Users
let users=[{role:'admin',name:'Abdirizak',email:'Abdirizak@gmail.com',password:'1234'},
           {role:'teacher',name:'Teacher 1',email:'teacher@gmail.com',password:'1234'},
           {role:'student',name:'Student 1',email:'student@gmail.com',password:'1234'}];
let currentUser=null;

// Students
let students=[{name:'Abdirizak',email:'abdirizak@gmail.com',paid:500,month:'September'},
              {name:'Student B',email:'studentb@gmail.com',paid:400,month:'September'},
              {name:'Student C',email:'studentc@gmail.com',paid:450,month:'September'}];

// Payments
let payments=[...students.map(s=>({student:s.name,amount:s.paid,month:s.month}))];

// Login
function login(){
  const email=document.getElementById('email').value.trim();
  const password=document.getElementById('password').value.trim();
  const found=users.find(u=>u.email.toLowerCase()===email.toLowerCase()&&u.password===password);
  if(found){
    currentUser=found;
    document.getElementById('loginScreen').style.display='none';
    document.querySelector('.container').style.display='block';
    showAddButtons();
    updateAllTables();
    showSection('dashboard');
  }else{document.getElementById('loginError').innerText='Invalid email or password';}
}

// Show sections
function showSection(id){document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');}

// Notifications
const notifications=["Abdirizak paid tuition","Student B absent today","New teacher added"];
function showNotifications(){const container=document.getElementById('notifications');container.innerHTML="";notifications.forEach(n=>{const div=document.createElement('div');div.className='notification-item';div.innerText=n;container.appendChild(div);});}
showNotifications();

// Add buttons
function showAddButtons(){if(currentUser.role==='admin'){document.getElementById('addStudentBtn').style.display='inline-block';document.getElementById('addPaymentBtn').style.display='inline-block';document.getElementById('addUserBtn').style.display='inline-block';}}

// Student CRUD
function updateStudentTable(){
  const table=document.getElementById('studentsTable'); table.innerHTML='<tr><th>Name</th><th>Email</th><th>Paid</th><th>Month</th><th>Actions</th></tr>';
  students.forEach((s,i)=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${s.name}</td><td>${s.email}</td><td contenteditable="${currentUser.role==='admin'}">${s.paid}</td><td contenteditable="${currentUser.role==='admin'}">${s.month}</td><td><button ${currentUser.role!=='admin'?'disabled':''} onclick="saveStudent(${i})">Save</button><button ${currentUser.role!=='admin'?'disabled':''} onclick="deleteStudent(${i})">Delete</button></td>`;table.appendChild(tr);});
  document.getElementById('totalStudents').innerText=students.length;updatePaymentSelect();updatePaymentTable();updateChart();
}
function showAddStudentForm(){document.getElementById('addStudentForm').style.display='block';}
function hideAddStudentForm(){document.getElementById('addStudentForm').style.display='none';}
function addStudent(){const name=document.getElementById('newName').value.trim();const email=document.getElementById('newEmail').value.trim();const paid=Number(document.getElementById('newPaid').value);const month=document.getElementById('newMonth').value.trim();if(name&&email&&paid&&month){students.push({name,email,paid,month});hideAddStudentForm();updateStudentTable();}else{alert('Please fill all fields');}}
function saveStudent(index){const table=document.getElementById('studentsTable');const row=table.rows[index+1];students[index].paid=Number(row.cells[2].innerText);students[index].month=row.cells[3].innerText;updatePaymentTable();updateChart();alert('Student updated!');}
function deleteStudent(index){if(confirm('Delete student?')){students.splice(index,1);updateStudentTable();}}

// Payments
function updatePaymentSelect(){const select=document.getElementById('paymentStudent');select.innerHTML='';students.forEach(s=>{const opt=document.createElement('option');opt.value=s.name;opt.innerText=s.name;select.appendChild(opt);});}
function showAddPaymentForm(){document.getElementById('addPaymentForm').style.display='block';}
function hideAddPaymentForm(){document.getElementById('addPaymentForm').style.display='none';}
function addPayment(){const student=document.getElementById('paymentStudent').value;const amount=Number(document.getElementById('paymentAmount').value);const month=document.getElementById('paymentMonth').value;if(student&&amount&&month){payments.push({student,amount,month});hideAddPaymentForm();updatePaymentTable();updateChart();}else alert('Fill all fields');}
function updatePaymentTable(){const table=document.getElementById('paymentsTable');table.innerHTML='<tr><th>Student</th><th>Amount</th><th>Month</th></tr>';payments.forEach(p=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${p.student}</td><td>${p.amount}</td><td>${p.month}</td>`;table.appendChild(tr);});document.getElementById('totalPayments').innerText='$'+payments.reduce((a,b)=>a+b.amount,0);}

// Users
function showAddUserForm(){document.getElementById('addUserForm').style.display='block';}
function hideAddUserForm(){document.getElementById('addUserForm').style.display='none';}
function addUser(){const name=document.getElementById('userName').value.trim();const email=document.getElementById('userEmail').value.trim();const password=document.getElementById('userPassword').value.trim();const role=document.getElementById('userRole').value;if(name&&email&&password&&role){users.push({name,email,password,role});hideAddUserForm();updateUsersTable();}else alert('Fill all fields');}
function updateUsersTable(){const table=document.getElementById('usersTable');table.innerHTML='<tr><th>Name</th><th>Email</th><th>Role</th><th>Actions</th></tr>';users.forEach((u,i)=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${u.name}</td><td>${u.email}</td><td>${u.role}</td><td><button ${currentUser.role!=='admin'?'disabled':''} onclick="deleteUser(${i})">Delete</button></td>`;table.appendChild(tr);});document.getElementById('totalTeachers').innerText=users.filter(u=>u.role==='teacher').length;}
function deleteUser(index){if(confirm('Delete user?')){users.splice(index,1);updateUsersTable();}}

// Chart
const ctx=document.getElementById('paymentChart').getContext('2d');let chart=null;
function updateChart(){const data=payments.reduce((acc,p)=>{acc[p.student]=(acc[p.student]||0)+p.amount;return acc;},{});
const labels=Object.keys(data);const values=Object.values(data);
if(chart) chart.destroy();
chart=new Chart(ctx,{type:'bar',data:{labels,datasets:[{label:'Payments ($)',data:values,backgroundColor:'rgba(255,77,77,0.7)',borderColor:'rgba(255,77,77,1)',borderWidth:1}]},options:{responsive:true,scales:{y:{beginAtZero:true}}}});
}

// Update All
function updateAllTables(){updateStudentTable();updatePaymentTable();updateUsersTable();updateChart();}
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
